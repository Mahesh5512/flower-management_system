<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Wishlist - BloomFlowers</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo">BloomFlowers</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                <button id="cartBtn" class="btn">Cart <span id="cartCount">0</span></button>
                <button id="logoutBtn" class="btn">Logout</button>
            </div>
        </div>
    </header>

    <main>
        <section class="wishlist-page">
            <div class="container">
                <h2>My Wishlist</h2>
                <div class="product-grid" id="wishlistGrid">
                    <!-- Wishlist items will be loaded here dynamically -->
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 BloomFlowers. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Check if user is logged in
        function checkLoginStatus() {
            const user = localStorage.getItem('currentUser');
            
            if (!user) {
                // Redirect to home page if not logged in
                window.location.href = 'index.html';
                return;
            }
            
            // Add event listeners
            document.getElementById('cartBtn').addEventListener('click', () => {
                window.location.href = 'cart.html';
            });
            
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('currentUser');
                window.location.href = 'index.html';
            });
            
            // Load wishlist
            loadWishlist();
        }
        
        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = cartCount;
        }
        
        // Load wishlist items
        function loadWishlist() {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            const wishlist = JSON.parse(localStorage.getItem(`wishlist_${user.username}`)) || [];
            const allFlowers = JSON.parse(localStorage.getItem('flowers')) || [];
            
            const wishlistGrid = document.getElementById('wishlistGrid');
            
            if (wishlist.length === 0) {
                wishlistGrid.innerHTML = '<p class="empty-message">Your wishlist is empty. Add some beautiful flowers!</p>';
                return;
            }
            
            wishlistGrid.innerHTML = '';
            
            wishlist.forEach(flowerId => {
                const flower = allFlowers.find(f => f.id == flowerId);
                if (flower) {
                    // Use a flower icon instead of images
                    const flowerIcon = getFlowerIcon(flower.category || "default");
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.innerHTML = `
                        <div class="product-image">
                            <i class="${flowerIcon}" style="font-size: 50px; color: #e91e63;"></i>
                        </div>
                        <div class="product-info">
                            <h3>${flower.name}</h3>
                            <p>${flower.description}</p>
                            <div class="price">â‚¹${parseFloat(flower.price * 83).toFixed(2)}</div>
                            <div class="product-actions">
                                <button class="btn btn-outline" onclick="removeFromWishlist(${flower.id})">Remove</button>
                                <button class="btn btn-primary" onclick="window.location.href='product-detail.html?id=${flower.id}'">
                                    <i class="fas fa-eye"></i> View Details
                                </button>
                                <button class="btn btn-primary" onclick="addToCart(${flower.id})">Add to Cart</button>
                            </div>
                        </div>
                    `;
                    wishlistGrid.appendChild(productCard);
                }
            });
        }
        
        // Remove from wishlist
        function removeFromWishlist(flowerId) {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            const wishlist = JSON.parse(localStorage.getItem(`wishlist_${user.username}`)) || [];
            
            const newWishlist = wishlist.filter(id => id != flowerId);
            localStorage.setItem(`wishlist_${user.username}`, JSON.stringify(newWishlist));
            
            loadWishlist();
        }
        
        // Add to cart
        function addToCart(flowerId) {
            const flowers = JSON.parse(localStorage.getItem('flowers')) || [];
            const flower = flowers.find(f => f.id == flowerId);
            
            if (!flower) return;
            
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingItem = cart.find(item => item.id == flowerId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: flower.id,
                    name: flower.name,
                    price: parseFloat(flower.price),
                    image: flower.image,
                    quantity: 1
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            alert('Added to cart!');
        }
        
        // Run when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
            updateCartCount();
        });

// Function to get appropriate flower icon based on category
function getFlowerIcon(category) {
    const iconMap = {
        "Rose": "fas fa-rose",
        "Tulip": "fas fa-seedling",
        "Sunflower": "fas fa-sun",
        "Lily": "fas fa-feather-alt",
        "Orchid": "fas fa-wind",
        "Daisy": "fas fa-leaf",
        "Carnation": "fas fa-pagelines",
        "Peony": "fas fa-spa",
        "Hydrangea": "fas fa-cloud",
        "Daffodil": "fas fa-star",
        "Chrysanthemum": "fas fa-asterisk",
        "Poppy": "fas fa-apple-alt",
        "Lavender": "fas fa-air-freshener",
        "Jasmine": "fas fa-moon",
        "Gardenia": "fas fa-circle",
        "Camellia": "fas fa-dot-circle",
        "Azalea": "fas fa-ring",
        "Begonia": "fas fa-heart",
        "Marigold": "fas fa-fire",
        "Zinnia": "fas fa-splotch",
        "Cosmos": "fas fa-meteor",
        "Snapdragon": "fas fa-sort-up",
        "Foxglove": "fas fa-hand-point-up",
        "Delphinium": "fas fa-water",
        "Lisianthus": "fas fa-mountain",
        "Freesia": "fas fa-wind",
        "Gladiolus": "fas fa-sword",
        "Alstroemeria": "fas fa-archway",
        "Statice": "fas fa-anchor",
        "Limonium": "fas fa-lemon",
        "Eucalyptus": "fas fa-tree",
        "Ranunculus": "fas fa-radiation",
        "Anemone": "fas fa-wind",
        "Sweet Pea": "fas fa-peapod",
        "Stock": "fas fa-align-center",
        "Celosia": "fas fa-feather",
        "Buddleia": "fas fa-bug",
        "Heather": "fas fa-mound",
        "Protea": "fas fa-egg",
        "Bird of Paradise": "fas fa-dove",
        "Calla Lily": "fas fa-shoe-prints",
        "Gerbera Daisy": "fas fa-dizzy",
        "Cherry Blossom": "fas fa-chess-pawn",
        "Magnolia": "fas fa-medal",
        "Hibiscus": "fas fa-hockey-puck",
        "default": "fas fa-seedling"
    };
    
    // Return specific icon or default
    return iconMap[category] || iconMap.default;
}

    </script>
</body>
</html>